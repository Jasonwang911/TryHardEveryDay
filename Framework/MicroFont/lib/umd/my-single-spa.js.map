{"version":3,"file":"my-single-spa.js","sources":["../../src/applications/apps.helper.js","../../src/start.js","../../src/lifecycles/helper.js","../../src/applications/timeout.js","../../src/lifecycles/load.js","../../src/navigations/invoke.js","../../src/applications/apps.js"],"sourcesContent":["// 未加载\r\nexport const NOT_LOADED = 'NOT_LOADED';\r\n// 加载app代码中\r\nexport const LOAD_RESOURCE_CODE = 'LOAD_RESOURCE_CODE';\r\n// 加载成功，但未启动\r\nexport const NOT_BOOTSTRAPPED = 'NOT_BOOTSTRAPPED';\r\n// 启动中\r\nexport const BOOTSTRAPPING = 'BOOTSTRAPPING';\r\n// 启动成功，未挂载\r\nexport const NOT_MOUNTED = 'NOT_MOUNTED';\r\n// 挂载中\r\nexport const MOUNTING = 'MOUNTING';\r\n// 挂载成功\r\nexport const MOUNTED = 'MOUNTED';\r\n// 卸载中\r\nexport const UNMOUNTING = 'UNMOUNTING';\r\n// 加载时参数校验未通过，或非致命错误\r\nexport const SKIP_BECAUSE_BROKEN = 'SKIP_BECAUSE_BROKEN';\r\n// 加载时遇到致命错误\r\nexport const LOAD_ERROR = 'LOAD_ERROR';\r\n// 更新service中\r\nexport const UPDATING = 'UPDATING';\r\n\r\nexport function noSkip(app) {\r\n  return app.status !== SKIP_BECAUSE_BROKEN\r\n}\r\n\r\nexport function noLoadError(app) {\r\n  return app.status !== LOAD_ERROR\r\n}\r\n\r\nexport function isLoaded(app) {\r\n  return app.status !== NOT_LOADED && app.status !== SKIP_BECAUSE_BROKEN && app.status !== LOAD_ERROR\r\n}\r\n\r\nexport function isntLoaded(app) {\r\n  return app.status === NOT_LOADED \r\n}\r\n\r\nexport function isActive(app) {\r\n  return app.status === MOUNTED\r\n}\r\n\r\nexport function isntActive(app) {\r\n  return !isActive(app)\r\n}\r\n\r\nexport function shouldBeActivity(app) {\r\n  try{\r\n    return app.activityWhen(window.location)\r\n  }catch(e) {\r\n    app.status = SKIP_BECAUSE_BROKEN\r\n    console.log(e)\r\n  }\r\n}\r\n","/*\r\n * @Author: Jason wang\r\n * @Date: 2019-12-05 11:17:18\r\n * @Descripttion:  系统启动状态\r\n * @version: \r\n */\r\nlet started = false\r\n\r\nexport function start() {\r\n  \r\n}\r\n\r\nexport function isStarted() {\r\n  return started\r\n}","// 判断是不是Promise\r\nexport function smellLikeAPromise(promise) {\r\n  if(promise instanceof Promise) {\r\n    return true\r\n  }\r\n  return typeof promise === 'object' && typeof promise.then === 'function' && typeof promise.catch === 'function'\r\n}\r\n\r\nexport function flattenLifecycleArray(lifecycle, description) {\r\n  if(!Array.isArray(lifecycle)) {\r\n    lifecycle = [lifecycle]\r\n  }\r\n  if(!lifecycle.length) {\r\n    // 空对象\r\n    lifecycle = [() => Promise.resolve()]\r\n  }\r\n  return new Promise((resolve,reject) => {\r\n    waitForPromise(0)\r\n    function waitForPromise() {\r\n      let fn = lifecycle[index]()\r\n      if(!smellLikeAPromise(fn)) {\r\n        reject(new Error(`${description} has error`))\r\n      }else {\r\n        fn.then(() => {\r\n          if(index >= lifecycle.length-1) {\r\n            resolve()\r\n          }else {\r\n            waitForPromise(++index)\r\n          }\r\n        }).catch(e => {\r\n          reject(e)\r\n        })\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nexport function getProps(app) {\r\n  return {\r\n    name: app.name,\r\n    ...app.customProps\r\n  }\r\n}","/*\r\n * @Author: Jason wang\r\n * @Date: 2019-12-18 13:31:54\r\n * @Descripttion: 超时处理\r\n */\r\nconst TIMEOUTS = {\r\n  bootstrap: {\r\n    milliseconds: 3000,     // 超时的时间\r\n    rejectWhenTimeout: false    // 超时后是否拒绝   \r\n  },\r\n  mount: {\r\n    milliseconds: 3000,\r\n    rejectWhenTimeout: false\r\n  },\r\n  unmount: {\r\n    milliseconds: 3000,\r\n    rejectWhenTimeout: false\r\n  },\r\n}\r\n\r\n/**\r\n * @name: \r\n * @test: test font\r\n * @msg: \r\n * @lifecyclePromise {Promise} \r\n * @description {string} \r\n * @timeout {data} \r\n * @return: \r\n */\r\nexport function reasonableTime(lifecyclePromise, description, timeout) {\r\n  return new Promise((resolve, reject) => {\r\n    let finished = false\r\n    lifecyclePromise.then((data) => {\r\n      finished = true\r\n      resolve(data)\r\n    }).catch(e => {\r\n      finished = true\r\n      reject(e)\r\n    })\r\n\r\n    setTimeout(() => {\r\n      // 规定时间没有超时\r\n      if(finished) {\r\n        return \r\n      }\r\n      if(timeout.rejectWhenTimeout) {\r\n        reject(`${description}`)\r\n      }else {\r\n        console.log('timeout but waiting')\r\n      }\r\n    }, timeout.milliseconds)\r\n  })\r\n}\r\n\r\nexport function ensureAppTimeout(timeouts={}) {\r\n  return {\r\n  ...TIMEOUTS,\r\n  ...timeouts\r\n  }\r\n}","import { NOT_LOADED, LOAD_RESOURCE_CODE, SKIP_BECAUSE_BROKEN, LOAD_ERROR, NOT_BOOTSTRAPPED } from \"../applications/apps.helper\";\r\nimport { smellLikeAPromise, flattenLifecycleArray, getProps } from './helper'\r\nimport { ensureAppTimeout } from '../applications/timeout'\r\n\r\n// 加载app\r\nexport function toLoadPromise(app) {\r\n  if(app.status !== NOT_LOADED) {\r\n    return Promise.resolve(app)\r\n  }\r\n  // 修改状态为加载源代码\r\n  app.status = LOAD_RESOURCE_CODE\r\n  // 加载app  getProps() 是获取app相关的描述信息\r\n  let loadPromise = app.loadFunction(getProps(app))\r\n  if(!smellLikeAPromise(loadPromise)) {\r\n    app.status = SKIP_BECAUSE_BROKEN\r\n    return Promise.reject(new Error('app.loadFuntion not a promise'))\r\n  }\r\n  loadPromise.then(appConfig => {\r\n    if(typeof appConfig !== 'object') {\r\n      throw new Error('')\r\n    }\r\n    // 生命周期  验证生命周期有没有，是不是函数   bootstrap mount unmount \r\n    let errors = []\r\n    let lifecycleArr = ['bootstrap', 'mount', 'unmount']\r\n    lifecycleArr.forEach(lifecycle => {\r\n      if(!appConfig[lifecycle]) {\r\n        errors.push(`lifecycle: ${lifecycle} must be exists`)\r\n      }\r\n    })\r\n    if(errors.length) {\r\n      app.status = SKIP_BECAUSE_BROKEN\r\n      console.log(errors)\r\n      return \r\n    }\r\n    // 修改状态为 not \r\n    app.status = NOT_BOOTSTRAPPED\r\n    // 处理生命周期和超时   需要做reduce处理\r\n    app.bootstrap = flattenLifecycleArray(appConfig.bootstrap, `app: ${app.name} bootstrap`)\r\n    app.mount = flattenLifecycleArray(appConfig.mount, `app: ${app.name} mount`)\r\n    app.unmount = flattenLifecycleArray(appConfig.unmount, `app: ${app.name} unmount`)\r\n    // 超时处理\r\n    app.timeouts = ensureAppTimeout(appConfig.timeouts)\r\n    console.log(app)\r\n    return app\r\n  }).catch(e => {\r\n    app.status = LOAD_ERROR\r\n    console.log('====>', e)\r\n  })\r\n}","/*\r\n * @Author: Jason wang\r\n * @Date: 2019-12-05 13:35:09\r\n * @Descripttion: \r\n */\r\nimport { isStarted } from '../start'    // 判断系统是否启动\r\nimport { getAppsToload, getAppsToUnmount, getAppsToMount } from '../applications/apps'\r\nimport { toLoadPromise } from '../lifecycles/load'\r\nimport { toBootstrapPromise } from '../lifecycles/bootstrap'\r\nimport { toMountPromise } from '../lifecycles/mount'\r\nimport { toUnmountPromise } from '../lifecycles/unmount'\r\n\r\n// 拿到所有得app\r\nlet appChangesUnderway = false\r\nlet chagesQueue = []\r\n\r\nexport function invoke() {\r\n  // 判断系统是否启动\r\n  if(appChangesUnderway) {\r\n    return new Promise((resolve, reject) => {\r\n      chagesQueue.push({\r\n        success: resolve,\r\n        failure: reject\r\n      })\r\n    })\r\n  }\r\n  appChangesUnderway = true\r\n  if(isStarted()) {\r\n    // 启动app\r\n\r\n  }else {\r\n    // 加载app 并不执行，相当于预加载\r\n    loadApps()\r\n  }\r\n\r\n  function loadApps() {\r\n    // 获取需要被加载的app\r\n    getAppsToload().map(toLoadPromise).then(() => {\r\n      console.log(1)\r\n    })\r\n    // getAppsToload().map(app => {\r\n    //   return toLoadPromise(app)\r\n    // })\r\n  }\r\n\r\n  function preformAppChanges() {\r\n    // 先卸载不需要的app  \r\n    getAppsToUnmount().map(toUnmountPromise)\r\n    // will 加载 app\r\n    getAppsToload().map(app => {\r\n      toLoadPromise(app).then(toBootstrapPromise)\r\n    })\r\n    // will mount app\r\n    getAppsToMount().map(toMountPromise)\r\n\r\n    // 针对load和mount的app去重\r\n  }\r\n\r\n\r\n}","/*\r\n * @Author: Jason wang\r\n * @Date: 2019-12-05 10:13:13\r\n * @Descripttion: \r\n * @version: \r\n */\r\nimport { NOT_LOADED, noSkip, noLoadError, isntLoaded, shouldBeActivity, isActive, isntActive, isLoaded } from './apps.helper'\r\nimport { invoke } from '../navigations/invoke'\r\n\r\nlet APPS = []\r\n\r\n/*\r\n*   注册app\r\n*   @param  {string} appName  要注册app的名称\r\n*   @param  {Function<Promise> | Object} loadFunction  app异步加载函数或app内容\r\n*   @param  {Function<boolean>}  activityWhen 判断该app应该在何时被启动\r\n*   @param  {Object} customProps  自定义配置\r\n*   return Promis\r\n*/\r\nexport function registerApplication(appName, loadFunction, activityWhen, customProps={}) {\r\n  if(!appName || typeof appName !== 'string') {\r\n    throw new Error('appName must be a non-empty string')\r\n  }\r\n  if(!loadFunction) {\r\n    throw new Error('loadFunction must be a function or object')\r\n  }\r\n  if(typeof loadFunction !== 'function') {\r\n    // 如果是object 包装成返回的Promise\r\n    loadFunction = () => Promise.resolve(loadFunction)\r\n  }\r\n  if(typeof activityWhen !== 'function') {\r\n    throw new Error('activityWhen must be a function')\r\n  }\r\n  APPS.push({\r\n    name: appName,\r\n    loadFunction,\r\n    activityWhen,\r\n    customProps,\r\n    // app状态\r\n    status: NOT_LOADED\r\n  })\r\n  console.log(APPS)\r\n  invoke()\r\n}\r\n\r\n\r\nexport function getAppsToload() {\r\n  // 判断需要被加载(load)的App： 没有被跳过，没有加载错误，没有被加载过，需要被加载\r\n  return APPS.filter(noSkip).filter(noLoadError).filter(isntLoaded).filter(shouldBeActivity)\r\n}\r\n\r\n// 卸载app\r\nexport function getAppsToUnmount() {\r\n  return APPS.filter(noSkip).filler(isActive).filter(shouldBeActivity)\r\n}\r\n\r\n// mount app\r\nexport function getAppsToMount() {\r\n  // 没有中断  已经加载过的   没有被mount的  应该被mount的\r\n  return APPS.filter(noSkip).filter(isLoaded).filter(isntActive).filter(shouldBeActivity)\r\n}"],"names":["NOT_LOADED","LOAD_RESOURCE_CODE","NOT_BOOTSTRAPPED","SKIP_BECAUSE_BROKEN","LOAD_ERROR","noSkip","app","status","noLoadError","isntLoaded","shouldBeActivity","activityWhen","window","location","e","console","log","start","smellLikeAPromise","promise","Promise","then","catch","flattenLifecycleArray","lifecycle","description","Array","isArray","length","resolve","reject","waitForPromise","fn","index","Error","getProps","name","customProps","TIMEOUTS","bootstrap","milliseconds","rejectWhenTimeout","mount","unmount","ensureAppTimeout","timeouts","toLoadPromise","loadPromise","loadFunction","appConfig","errors","lifecycleArr","forEach","push","appChangesUnderway","invoke","chagesQueue","loadApps","getAppsToload","map","APPS","registerApplication","appName","filter"],"mappings":"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"}